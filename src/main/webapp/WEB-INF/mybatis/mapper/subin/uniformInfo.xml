<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="uniformInfo">

	<select id="selectUniformInfo" resultType="uniformInfoVo"> <!-- 유니폼 조회 -->
		SELECT *
		FROM (SELECT ROWNUM AS IDX, UI.*
		      FROM (SELECT * 
		      		FROM UNIFORM_INFO
					<where>
						<if test="uniformName != null and uniformName != ''.toString()">UNIFORM_NAME LIKE '%'||#{uniformName}||'%'</if>
						<if test="color != null and color != ''.toString()">COLOR LIKE '%'||#{color}||'%'</if>
					</where>
		           ORDER BY UNI_INFO_NO) UI
		     ) UI
		WHERE IDX BETWEEN #{beginList} AND #{endList}
	</select>
	
	<select id="selectUniformInfoCnt" resultType="int"> <!-- 검색 결과 데이터 개수 조회 -->
		SELECT COUNT(*) FROM UNIFORM_INFO
		<where>
			<if test="uniformName != null">UNIFORM_NAME LIKE '%'||#{uniformName}||'%'</if>
			<if test="color != null">COLOR = #{color}</if>
		</where>
	</select>
	
	<select id="selectUniformInfoOne" resultType="uniformInfoVo"> <!-- 유니폼 상세 조회 -->
		SELECT * FROM UNIFORM_INFO
		WHERE UNI_INFO_NO = #{uniInfoNo}
	</select>
	
	<update id="updateUniformInfo"> <!--유니폼 정보 수정 -->
		UPDATE UNIFORM_INFO
		<set>
			<if test="uniformName != null">UNIFORM_NAME = #{uniformName},</if> <!-- 상품명 -->
			<if test="color != null">COLOR = #{color},</if> <!-- 색상 -->
			<if test="price != null">PRICE = #{price},</if> <!-- 가격 -->
			<if test="uniformImg != null">UNIFORM_IMG = #{uniformImg},</if> <!-- 사진 -->
			<if test="sCount != null">S_COUNT = #{sCount},</if>
			<if test="mCount != null">M_COUNT = #{mCount},</if>
			<if test="lCount != null">L_COUNT = #{lCount},</if>
			<if test="xlCount != null">XL_COUNT = #{xlCount}</if>
		</set>
		WHERE UNI_INFO_NO = #{uniInfoNo}
	</update>
	
	<insert id="insertUniformInfo"> <!-- 유니폼 등록 -->
		INSERT INTO UNIFORM_INFO (UNI_INFO_NO, UNIFORM_NAME, COLOR, PRICE, UNIFORM_IMG, S_COUNT, M_COUNT, L_COUNT, XL_COUNT)
		VALUES (SEQ_UNI_INFO.NEXTVAL, #{uniformName}, #{color}, #{price}, #{uniformImg}, #{sCount}, #{mCount}, #{lCount}, #{xlCount})
	</insert>
	
	<delete id="deleteUniformInfo">
		DELETE FROM UNIFORM_INFO
		WHERE UNI_INFO_NO = #{uniInfoNo}
	</delete>
</mapper>